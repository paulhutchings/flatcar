{
  "ignition": {
    "version": "3.3.0"
  },
  "passwd": {
    "users": [
      {
        "groups": [
          "docker"
        ],
        "name": "core",
        "sshAuthorizedKeys": [
          "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCn5exRlpq7WUhbhBwkNbsUBO/7HdpcP3HadkL9/V3ug7fY90QoIIk935JDH5mBfgLblIEUDzSFSUvUVnKe+epETQysPiVSF06+9iz63/uKlr7mrvlmC3Pmh726MLNLpDVqrJ2g4tjmC2iJpyc5sAKoQsJPv/7Pi2DlVOVAs1H7ci3uclnyT2ou13Sj5rImLqcgT22DFqDraEDWlwuMIYr1epxpjbUmx9hjB/SNWXFm/O75naV8LfderZ2WyI1j75rqkDBEXcHYd/SCPM58u9FlHeXJNkxr9rWRGpinqLEuj0hSFdvilKFZtawHSZ4ha4UGWFbywaxoDTsErLg8VGyG7w8m541YjbCKE+/7znbfsv8AqrYj3Hx5oV8SQwKTu75XxvHzmY37QVvPInZiSk1QeKpTUEqVc9duH9zDyNvje/qMtpsSYee/gTGFt+p2SX2kNW4t7PRLG93E9Kcbn/0IjFZ6snXbrOGcuV8ohervtD2Cmzubgi0wlfiltgDQnvs= paul@studiop-dev"
        ]
      }
    ]
  },
  "storage": {
    "disks": [
      {
        "device": "/dev/disk/by-id/ata-Samsung_SSD_850_EVO_500GB_S21HNXBG538814W",
        "partitions": [
          {
            "label": "docker"
          }
        ],
        "wipeTable": true
      },
      {
        "device": "/dev/disk/by-id/ata-Samsung_SSD_850_EVO_500GB_S2RANB0J507595K",
        "partitions": [
          {
            "label": "docker"
          }
        ],
        "wipeTable": true
      }
    ],
    "files": [
      {
        "path": "/etc/sysctl.d/20-silence-audit.conf",
        "contents": {
          "source": "data:,kernel.printk%3D4"
        }
      },
      {
        "path": "/etc/hostname",
        "contents": {
          "source": "data:,coreos"
        }
      },
      {
        "path": "/opt/docker-compose/portainer.yml",
        "contents": {
          "source": "https://raw.githubusercontent.com/studioph/compose/master/portainer.yml"
        }
      },
      {
        "path": "/opt/bin/docker-compose",
        "contents": {
          "source": "https://github.com/docker/compose/releases/download/v2.5.0/docker-compose-linux-x86_64"
        },
        "mode": 493
      },
      {
        "overwrite": true,
        "path": "/etc/selinux/config",
        "contents": {
          "compression": "gzip",
          "source": "data:;base64,H4sIAAAAAAAC/3SQz2pyMRTE9z7FgNtPH+CDLl0UrBS00C7TZPQeGnMuOedqfftyteYWSrPKnzPzm8kcu04Me8lE1OJVs8E7wjw4oXtsV2spwye03O4v5jwuZ/Px4XHz8vqAGAo8fBBargrvaIR3lcQp5IH2fzbHbbHstUYpByyaszEOVfyCXrPEC8S+x5iWTdizHsVMTvyh7KsUN5xDLVIOBinmDGkM0UCTRRIL75kJC2x08mjQrCGNyHuxCTm13b09r/5sfNZffT3UA/3K3N23fdVIMxpC5XhyRmf610THbFjgacguWPPEjG37otu0aGk5r5HunNlXAAAA//9vql2W0QEAAA=="
        },
        "mode": 384
      },
      {
        "path": "/etc/NetworkManager/system-connections/1g.nmconnection",
        "contents": {
          "compression": "gzip",
          "source": "data:;base64,H4sIAAAAAAAC/zTMQQqDMBBG4f1/F21iA5XAnERcDMmggiaSjBZvXwq6fXy8IeSUJOiS04glkp2g1y4kOktJouBD821IyyGIqTb5lNLoWskAw0NHbBwajrFIrWR7H4x30YvxvfFdDwzLfrrxPyBrWtPa9uNwe/uk96tzmFjly9fTLDbROUfaOB284hcAAP//ThgTMbUAAAA="
        },
        "mode": 384
      },
      {
        "path": "/etc/NetworkManager/system-connections/10g.nmconnection",
        "contents": {
          "source": "data:;base64,W2Nvbm5lY3Rpb25dCmlkPTEwZwp0eXBlPWV0aGVybmV0CmF1dG9jb25uZWN0PXRydWUKCltldGhlcm5ldF0KbWFjLWFkZHJlc3M9ZTQ6MWQ6MmQ6N2U6ZjQ6YzAKCltpcHY0XQphZGRyZXNzMT0xMC4wLjEwLjMvMjQKbWV0aG9kPW1hbnVhbApkaGNwLXRpbWVvdXQ9MQo="
        },
        "mode": 384
      }
    ],
    "filesystems": [
      {
        "device": "/dev/md/docker",
        "format": "ext4",
        "label": "docker",
        "path": "/var/lib/docker",
        "wipeFilesystem": false
      }
    ],
    "raid": [
      {
        "devices": [
          "/dev/disk/by-id/ata-Samsung_SSD_850_EVO_500GB_S21HNXBG538814W-part1",
          "/dev/disk/by-id/ata-Samsung_SSD_850_EVO_500GB_S2RANB0J507595K-part1"
        ],
        "level": "mirror",
        "name": "docker"
      }
    ]
  },
  "systemd": {
    "units": [
      {
        "contents": "# Generated by Butane\n[Unit]\nBefore=local-fs.target\nRequires=systemd-fsck@dev-md-docker.service\nAfter=systemd-fsck@dev-md-docker.service\n\n[Mount]\nWhere=/var/lib/docker\nWhat=/dev/md/docker\nType=ext4\n\n[Install]\nRequiredBy=local-fs.target",
        "enabled": true,
        "name": "var-lib-docker.mount"
      },
      {
        "enabled": true,
        "name": "docker.service"
      },
      {
        "enabled": true,
        "name": "serial-getty@ttyS0.service"
      },
      {
        "contents": "[Unit]\nDescription=Initialize Portainer\nAfter=docker.service\nRequires=docker.service\n\n[Service]\nEnvironment=\"COMPOSE_PROJECT_NAME=portainer\"\nEnvironment=\"COMPOSE_FILE=/opt/docker-compose/portainer.yml\"\nExecStart=/opt/bin/docker-compose up --detach\nUser=core\nGroup=core\n\n[Install]\nWantedBy=multi-user.target\n",
        "enabled": true,
        "name": "portainer.service"
      },
      {
        "contents": "[Unit]\nDescription=Reboot weekly\n\n[Timer]\nOnCalendar=weekly America/New_York\nRandomizedDelaySec=1h\nUnit=reboot.service\n\n[Install]\nWantedBy=timers.target\n",
        "enabled": true,
        "name": "reboot.timer"
      },
      {
        "contents": "[Unit]\nDescription=Reboot server\n\n[Service]\nType=oneshot\nExecStart=/usr/sbin/reboot\n",
        "enabled": false,
        "name": "reboot.service"
      },
      {
        "enabled": false,
        "name": "rpm-ostree-countme.service"
      },
      {
        "enabled": false,
        "name": "rpm-ostree-countme.timer"
      }
    ]
  }
}
