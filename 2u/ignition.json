{
  "ignition": {
    "config": {},
    "security": {
      "tls": {}
    },
    "timeouts": {},
    "version": "2.3.0"
  },
  "networkd": {
    "units": [
      {
        "contents": "[Match]\nMACAddress=18:c0:4d:e0:80:28\n\n[Network]\nDNS=10.0.1.1\nAddress=10.0.1.3/24\nGateway=10.0.1.1\n",
        "name": "00-1g-static.network"
      },
      {
        "contents": "[Match]\nMACAddress=e4:1d:2d:7e:f4:c0\n\n[Network]\nAddress=10.0.10.3/24\n",
        "name": "00-10g-static.network"
      },
      {
        "contents": "[Match]\nMACAddress=18:c0:4d:e0:80:28\n\n[Link]\nNamePolicy=kernel database onboard slot path\nMACAddressPolicy=persistent\nWakeOnLan=magic",
        "name": "00-1g-patch.link"
      }
    ]
  },
  "passwd": {
    "users": [
      {
        "name": "core",
        "sshAuthorizedKeys": [
          "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCn5exRlpq7WUhbhBwkNbsUBO/7HdpcP3HadkL9/V3ug7fY90QoIIk935JDH5mBfgLblIEUDzSFSUvUVnKe+epETQysPiVSF06+9iz63/uKlr7mrvlmC3Pmh726MLNLpDVqrJ2g4tjmC2iJpyc5sAKoQsJPv/7Pi2DlVOVAs1H7ci3uclnyT2ou13Sj5rImLqcgT22DFqDraEDWlwuMIYr1epxpjbUmx9hjB/SNWXFm/O75naV8LfderZ2WyI1j75rqkDBEXcHYd/SCPM58u9FlHeXJNkxr9rWRGpinqLEuj0hSFdvilKFZtawHSZ4ha4UGWFbywaxoDTsErLg8VGyG7w8m541YjbCKE+/7znbfsv8AqrYj3Hx5oV8SQwKTu75XxvHzmY37QVvPInZiSk1QeKpTUEqVc9duH9zDyNvje/qMtpsSYee/gTGFt+p2SX2kNW4t7PRLG93E9Kcbn/0IjFZ6snXbrOGcuV8ohervtD2Cmzubgi0wlfiltgDQnvs= paul@studiop-dev"
        ]
      }
    ]
  },
  "storage": {
    "disks": [
      {
        "device": "/dev/disk/by-id/ata-Samsung_SSD_850_EVO_500GB_S21HNXBG538814W",
        "partitions": [
          {
            "label": "docker1"
          }
        ],
        "wipeTable": true
      },
      {
        "device": "/dev/disk/by-id/ata-Samsung_SSD_850_EVO_500GB_S2RANB0J507595K",
        "partitions": [
          {
            "label": "docker2"
          }
        ],
        "wipeTable": true
      }
    ],
    "files": [
      {
        "filesystem": "root",
        "path": "/etc/ssh/sshd_config",
        "contents": {
          "source": "data:,UsePrivilegeSeparation%20sandbox%0ASubsystem%20sftp%20internal-sftp%0AUseDNS%20no%0A%0APermitRootLogin%20no%0AAllowUsers%20core%0AAuthenticationMethods%20publickey%0A",
          "verification": {}
        },
        "mode": 384
      },
      {
        "filesystem": "root",
        "group": {
          "name": "core"
        },
        "path": "/home/core/compose.yml",
        "user": {
          "name": "core"
        },
        "contents": {
          "source": "https://raw.githubusercontent.com/paulhutchings/compose/master/portainer/compose.yml",
          "verification": {}
        },
        "mode": 436
      },
      {
        "filesystem": "root",
        "group": {
          "name": "core"
        },
        "path": "/home/core/docker-compose",
        "user": {
          "name": "core"
        },
        "contents": {
          "source": "https://github.com/docker/compose/releases/download/v2.4.1/docker-compose-linux-x86_64",
          "verification": {}
        },
        "mode": 493
      },
      {
        "filesystem": "root",
        "path": "/opt/flatcar-forklift/forklift.sh",
        "contents": {
          "source": "https://raw.githubusercontent.com/mediadepot/flatcar-forklift/master/forklift.sh",
          "verification": {}
        },
        "mode": 420
      }
    ],
    "filesystems": [
      {
        "mount": {
          "device": "/dev/md/docker",
          "format": "ext4",
          "label": "docker"
        },
        "name": "docker"
      }
    ],
    "raid": [
      {
        "devices": [
          "/dev/disk/by-id/ata-Samsung_SSD_850_EVO_500GB_S21HNXBG538814W-part1",
          "/dev/disk/by-id/ata-Samsung_SSD_850_EVO_500GB_S2RANB0J507595K-part1"
        ],
        "level": "mirror",
        "name": "docker"
      }
    ]
  },
  "systemd": {
    "units": [
      {
        "enabled": true,
        "name": "docker.service"
      },
      {
        "contents": "[Unit]\nBefore=local-fs.target\n\n[Mount]\nWhat=/dev/md/docker\nWhere=/var/lib/docker\nType=ext4\n\n[Install]\nWantedBy=local-fs.target\n",
        "enabled": true,
        "name": "var-lib-docker.mount"
      },
      {
        "contents": "[Unit]\nAfter=docker.service\nRequires=docker.service\n\n[Service]\nEnvironment=\"COMPOSE_PROJECT_NAME=portainer\"\nExecStart=/home/core/docker-compose up --detach\nUser=core\nGroup=core\nWorkingDirectory=/home/core\n\n[Install]\nWantedBy=multi-user.target\n",
        "enabled": true,
        "name": "portainer.service"
      },
      {
        "contents": "[Unit]\nBefore=local-fs.target\nConditionPathExists=/opt/overlay/modules\nConditionPathExists=/opt/overlay/modules.wd\n\n[Mount]\nType=overlay\nWhat=overlay\nWhere=/usr/lib/modules\nOptions=lowerdir=/usr/lib/modules,upperdir=/opt/overlay/modules,workdir=/opt/overlay/modules.wd\n\n[Install]\nWantedBy=local-fs.target\n",
        "enabled": true,
        "name": "usr-lib-modules.mount"
      },
      {
        "contents": "[Unit]\nDescription=Compile Kernel Modules for Flatcar\nRequires=docker.service network-online.target update-engine.service usr-lib64-modules.mount\nAfter=docker.service network-online.target update-engine.service usr-lib-modules.mount\n\n[Service]\nEnvironmentFile=/usr/share/coreos/release\nEnvironmentFile=/usr/share/coreos/update.conf\nEnvironment=FORKLIFT_BIN_DIR=/opt/flatcar-forklift\n\nType=oneshot\nRemainAfterExit=yes\nExecStart=-/bin/bash -c \"${FORKLIFT_BIN_DIR}/forklift.sh %i\"\nTimeoutStopSec=infinity\n\n[Install]\nWantedBy=multi-user.target\n",
        "name": "forklift@.service"
      }
    ]
  }
}
