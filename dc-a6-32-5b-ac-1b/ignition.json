{
  "ignition": {
    "version": "3.3.0"
  },
  "kernelArguments": {
    "shouldExist": [
      "console=ttyAMA0,115200n8"
    ]
  },
  "passwd": {
    "users": [
      {
        "groups": [
          "docker"
        ],
        "name": "core",
        "sshAuthorizedKeys": [
          "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDn7L/FMFNtzHQc7d8C3wYeskXX9MaJ6eAHu0rxbbbKFrldHwRdI5kCM1zspckA12qG/WqBgPIpsosfaBBw4DCQshhgPfyp66euEIb1lrJ6JrLHMsTJf1HR/X5SBfPxQVwhWzdMCzw4d0qNgKxPf+k+rl+TEm2w5byaO9SJ8kHU3XXczMj4zLijRgNkZE+RVahZQEtciiSK45s0AwQbHek2lA3TPLmAW4artv9MWYjYPKBb8IAawHqkbU1oqsKZ5IbRTUQg5pxdpLbCldiuq+JLD/xmoc45PGA9ru8tg2XQfAdAkV4DBKXga1FgM5M+Aqf64dXwua+AdoP/GQny3mbxM61DI03OQX3ftzec2P9/gz5eoVQykvvMzYG1I/WPhwWPeKheJdfgBciGliQYHuriAhcinzTSl1h58UX7H1JkjYNw1PaO63QcVpB21fXUU4XqJHutgRQdtdyTLClvdRz+StaajaSKYrzm3iWKcaoEkGXn8fJu3K+vkCq8Oq87N9E= paul@studiop-dev"
        ]
      }
    ]
  },
  "storage": {
    "files": [
      {
        "path": "/etc/sysctl.d/20-silence-audit.conf",
        "contents": {
          "source": "data:,kernel.printk%3D4"
        }
      },
      {
        "path": "/etc/hostname",
        "contents": {
          "source": "data:,iaas"
        }
      },
      {
        "path": "/opt/docker-compose/portainer.yml",
        "contents": {
          "source": "https://raw.githubusercontent.com/paulhutchings/compose/master/portainer.yml"
        }
      },
      {
        "path": "/opt/bin/docker-compose",
        "contents": {
          "source": "https://github.com/docker/compose/releases/download/v2.5.0/docker-compose-linux-aarch64"
        },
        "mode": 493
      },
      {
        "overwrite": true,
        "path": "/etc/selinux/config",
        "contents": {
          "compression": "gzip",
          "source": "data:;base64,H4sIAAAAAAAC/3SQz2pyMRTE9z7FgNtPH+CDLl0UrBS00C7TZPQeGnMuOedqfftyteYWSrPKnzPzm8kcu04Me8lE1OJVs8E7wjw4oXtsV2spwye03O4v5jwuZ/Px4XHz8vqAGAo8fBBargrvaIR3lcQp5IH2fzbHbbHstUYpByyaszEOVfyCXrPEC8S+x5iWTdizHsVMTvyh7KsUN5xDLVIOBinmDGkM0UCTRRIL75kJC2x08mjQrCGNyHuxCTm13b09r/5sfNZffT3UA/3K3N23fdVIMxpC5XhyRmf610THbFjgacguWPPEjG37otu0aGk5r5HunNlXAAAA//9vql2W0QEAAA=="
        },
        "mode": 384
      },
      {
        "path": "/etc/NetworkManager/system-connections/1g.nmconnection",
        "contents": {
          "compression": "gzip",
          "source": "data:;base64,H4sIAAAAAAAC/0TKO66DQAxG4f7fy0X45lGM5JUgCjO2ACl4EHgSsfs0JGnP+bpc3C3HXLzHrEwj4liNLSbb3AJSo5yGY6sGdJ/XY5H8J6qb7TtrTnJPl/90G5LkRAPQzevz2kN9Z2qbtqGGcHL6lhajhL3k+JnFYirKi3iVB94BAAD//9f38/KjAAAA"
        },
        "mode": 384
      },
      {
        "path": "/etc/zincati/config.d/51-rollout-wariness.toml",
        "contents": {
          "source": "data:,%5Bidentity%5D%0Arollout_wariness%20%3D%200.5%0A"
        }
      },
      {
        "path": "/etc/zincati/config.d/55-updates-strategy.toml",
        "contents": {
          "source": "data:;base64,W3VwZGF0ZXNdCnN0cmF0ZWd5ID0gInBlcmlvZGljIgpbW3VwZGF0ZXMucGVyaW9kaWMud2luZG93XV0KZGF5cyA9IFsiU3VuIl0Kc3RhcnRfdGltZSA9ICIxOjAwIgpsZW5ndGhfbWludXRlcyA9IDYwCg=="
        }
      }
    ]
  },
  "systemd": {
    "units": [
      {
        "enabled": true,
        "name": "docker.service"
      },
      {
        "enabled": true,
        "name": "serial-getty@ttyAMA0.service"
      },
      {
        "contents": "[Unit]\nDescription=Initialize Portainer\nAfter=docker.service\nRequires=docker.service\n\n[Service]\nEnvironment=\"COMPOSE_PROJECT_NAME=portainer\"\nEnvironment=\"COMPOSE_FILE=/opt/docker-compose/portainer.yml\"\nExecStart=/opt/bin/docker-compose up --detach\nUser=core\nGroup=core\n\n[Install]\nWantedBy=multi-user.target\n",
        "enabled": true,
        "name": "portainer.service"
      }
    ]
  }
}
